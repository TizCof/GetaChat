local SC_UI_Name = 'GetaUI'
local Players = game.Players
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character
local Mouse = LocalPlayer:GetMouse()
local COREGUI = game:GetService('CoreGui')
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local MarketplaceService = game:GetService("MarketplaceService")
local DefaultHideUIKey = Enum.KeyCode.RightControl
local getasset = getsynasset or getcustomasset
local req = http_request or request or HttpPost or syn.request
local VU = game:GetService("VirtualUser")
local VIM =game:GetService("VirtualInputManager")
local RS = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local CG = game:GetService("CoreGui")
local HTTPS = game:GetService("HttpService")
local RunS = game:getService("RunService")
local LP = Players.LocalPlayer
local tick1 = tick()

_G.User = 'Geta'

function MakeDraggable(topbarobject, object)
    local Dragging = nil
    local DragInput = nil
    local DragStart = nil
    local StartPosition = nil
    local function Update(input)
        local Delta = input.Position - DragStart
        local pos = UDim2.new(
                StartPosition.X.Scale,
                StartPosition.X.Offset + Delta.X,
                StartPosition.Y.Scale,
                StartPosition.Y.Offset + Delta.Y
            )
        object.Position = pos
    end
    topbarobject.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            Dragging = true
            DragStart = input.Position
            StartPosition = object.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    Dragging = false
                end
            end)
        end
    end)
    topbarobject.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            DragInput = input
        end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if input == DragInput and Dragging then
            Update(input)
        end
    end)
end

if game.CoreGui:FindFirstChild('GetaChat') then
    game.CoreGui:FindFirstChild('GetaChat'):Destroy()
end

local GetaChat = Instance.new("ScreenGui")
GetaChat.Name = "GetaChat"
GetaChat.Parent = game.CoreGui
GetaChat.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local Main = Instance.new("Frame")
local Top = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local Close = Instance.new("ImageButton")
local Reset = Instance.new("ImageButton")
local ChatScrollingFrame = Instance.new("ScrollingFrame")
local ChatFrame = Instance.new("Frame")
local UIListLayout = Instance.new("UIListLayout")
local ChatBox = Instance.new("Frame")
local BoxMessage = Instance.new("TextBox")
local UICorner = Instance.new("UICorner")
local Send = Instance.new("Frame")
local UICorner_2 = Instance.new("UICorner")
local SendIcon = Instance.new("ImageButton")
local SendDetector = Instance.new("TextButton")
local Drag = Instance.new("Frame")

Main.Name = "Main"
Main.Parent = GetaChat
Main.BackgroundColor3 = Color3.fromRGB(0, 10, 17)
Main.BorderSizePixel = 0
Main.Position = UDim2.new(0.33465606, 0, 0.135802463, 0)
Main.Size = UDim2.new(0, 500, 0, 500)

Top.Name = "Top"
Top.Parent = Main
Top.BackgroundColor3 = Color3.fromRGB(46, 47, 52)
Top.BorderSizePixel = 0
Top.Size = UDim2.new(1, 0, 0.0500000007, 0)

Title.Name = "Title"
Title.Parent = Top
Title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1.000
Title.Size = UDim2.new(1, 0, 1, 0)
Title.Font = Enum.Font.ArialBold
Title.Text = "GetaChat"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextScaled = true
Title.TextSize = 14.000
Title.TextWrapped = true

Close.Name = "Close"
Close.Parent = Top
Close.BackgroundTransparency = 1.000
Close.Position = UDim2.new(0.942000031, 0, 0.100000016, 0)
Close.Size = UDim2.new(0, 20, 0, 20)
Close.ZIndex = 2
Close.Image = "rbxassetid://3926305904"
Close.ImageRectOffset = Vector2.new(284, 4)
Close.ImageRectSize = Vector2.new(24, 24)
Close.ImageTransparency = 0.730

Reset.Name = "Reset"
Reset.Parent = Top
Reset.BackgroundTransparency = 1.000
Reset.LayoutOrder = 6
Reset.Position = UDim2.new(0.0159999728, 0, 0.099999994, 0)
Reset.Size = UDim2.new(0, 20, 0, 20)
Reset.ZIndex = 2
Reset.Image = "rbxassetid://3926307971"
Reset.ImageRectOffset = Vector2.new(244, 524)
Reset.ImageRectSize = Vector2.new(36, 36)
Reset.ImageTransparency = 0.730

ChatScrollingFrame.Name = "ChatScrollingFrame"
ChatScrollingFrame.Parent = Main
ChatScrollingFrame.Active = true
ChatScrollingFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ChatScrollingFrame.BackgroundTransparency = 1.000
ChatScrollingFrame.BorderSizePixel = 0
ChatScrollingFrame.Position = UDim2.new(0, 0, 0.0599999987, 0)
ChatScrollingFrame.Size = UDim2.new(1, 0, 0.939999998, -40)
ChatScrollingFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
ChatScrollingFrame.ScrollBarThickness = 4

ChatFrame.Name = "ChatFrame"
ChatFrame.Parent = ChatScrollingFrame
ChatFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ChatFrame.BackgroundTransparency = 1.000
ChatFrame.Position = UDim2.new(0, 5, 0, 0)
ChatFrame.Size = UDim2.new(1, -10, 1, 0)

UIListLayout.Parent = ChatFrame
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout.Padding = UDim.new(0, 4)

ChatBox.Name = "ChatBox"
ChatBox.Parent = Main
ChatBox.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ChatBox.BackgroundTransparency = 1.000
ChatBox.Position = UDim2.new(0.00999999978, 0, 0.924000025, 0)
ChatBox.Size = UDim2.new(0, 490, 0, 32)

BoxMessage.Name = "BoxMessage"
BoxMessage.Parent = ChatBox
BoxMessage.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
BoxMessage.Size = UDim2.new(0, 450, 0, 32)
BoxMessage.ClearTextOnFocus = false
BoxMessage.Font = Enum.Font.Gotham
BoxMessage.Text = ""
BoxMessage.PlaceholderText = '< Max 100 Characters>'
BoxMessage.TextColor3 = Color3.fromRGB(255, 255, 255)
BoxMessage.TextSize = 16.000
BoxMessage.TextWrapped = true
BoxMessage.TextXAlignment = Enum.TextXAlignment.Left
BoxMessage.TextYAlignment = Enum.TextYAlignment.Top

UICorner.CornerRadius = UDim.new(0, 4)
UICorner.Parent = BoxMessage

Send.Name = "Send"
Send.Parent = ChatBox
Send.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
Send.Position = UDim2.new(0.934693933, 0, 0, 0)
Send.Size = UDim2.new(0, 32, 0, 32)

UICorner_2.CornerRadius = UDim.new(0, 4)
UICorner_2.Parent = Send

SendIcon.Name = "SendIcon"
SendIcon.Parent = Send
SendIcon.BackgroundTransparency = 1.000
SendIcon.LayoutOrder = 4
SendIcon.Position = UDim2.new(0.1875, 0, 0.1875, 0)
SendIcon.Size = UDim2.new(0, 20, 0, 20)
SendIcon.ZIndex = 1
SendIcon.Image = "rbxassetid://3926307971"
SendIcon.ImageRectOffset = Vector2.new(44, 284)
SendIcon.ImageRectSize = Vector2.new(36, 36)
SendIcon.ImageTransparency = 0.460

SendDetector.Name = "SendDetector"
SendDetector.Parent = Send
SendDetector.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
SendDetector.BackgroundTransparency = 1.000
SendDetector.Size = UDim2.new(1, 0, 1, 0)
SendDetector.ZIndex = 4
SendDetector.Font = Enum.Font.SourceSans
SendDetector.TextColor3 = Color3.fromRGB(0, 0, 0)
SendDetector.TextSize = 14.000
SendDetector.TextTransparency = 1.000

Drag.Name = "Drag"
Drag.Parent = Main
Drag.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Drag.BackgroundTransparency = 1.000
Drag.Position = UDim2.new(0.064000003, 0, 0, 0)
Drag.Size = UDim2.new(0, 435, 0, 25)

MakeDraggable(Drag,Main)

local function create_chat(id,time,user,content)
    local Chat = Instance.new("TextLabel")
    Chat.Name = "Chat"
    Chat.Parent = ChatFrame
    Chat.Name = tostring(id)
    Chat.RichText = true
    Chat.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    Chat.BackgroundTransparency = 1.000
    Chat.Size = UDim2.new(1, 0, 0.0339805819, -10)
    Chat.Font = Enum.Font.Gotham
    Chat.Text = "<b>["..tostring(time).."] "..tostring(user)..":</b>\n"..tostring(content)
    Chat.TextColor3 = Color3.fromRGB(255, 255, 255)
    Chat.TextSize = 16.000
    Chat.TextWrapped = true
    Chat.TextXAlignment = Enum.TextXAlignment.Left
    Chat.TextYAlignment = Enum.TextYAlignment.Top
    Chat.AutomaticSize = Enum.AutomaticSize.Y
    wait()
    print(Chat.AbsoluteSize.Y+4)
    ChatScrollingFrame.CanvasSize = ChatScrollingFrame.CanvasSize+UDim2.new(0, 0, 0, Chat.AbsoluteSize.Y+4)
    print(ChatScrollingFrame.CanvasSize)
end
Reset.MouseButton1Click:Connect(function()
    reqtext = game:HttpGet('https://getachat.tizcof.repl.co/updatechat')
    splitted = reqtext:split('[{//}]')
    for i,v in pairs(splitted) do
        if v ~= '' then
            splitted2 = v:split('[{/}]')
            if not ChatFrame:FindFirstChild(tostring(splitted2[1])) then
                create_chat(splitted2[1],splitted2[2],splitted2[3],splitted2[4])
            end
        end
    end
end)
SendDetector.MouseButton1Click:Connect(function()
    spawn(function()
        SendIcon.ImageTransparency = 0
        wait(0.08)
        SendIcon.ImageTransparency = 0.46
    end)
    if tostring(BoxMessage.Text) ~= nil or tostring(BoxMessage.Text) ~= '' then 
        if tick()-tick1 > 2 then
            --create_chat('TIME',_G.User,BoxMessage.Text)
            game:HttpGet('https://getachat.tizcof.repl.co/chat?user='.._G.User..'&content='..tostring(BoxMessage.Text))
            BoxMessage.Text = ''
            wait()
            ChatScrollingFrame.CanvasPosition = ChatScrollingFrame.MaxCanvasPosition
            tick1 = tick()
        end
    end
end)
servertext = game:HttpGet('https://getachat.tizcof.repl.co'):split('[{/}]')
create_chat(0,servertext[1],servertext[2],servertext[3])
reqtext = game:HttpGet('https://getachat.tizcof.repl.co/updatechat')
splitted = reqtext:split('[{//}]')
for i,v in pairs(splitted) do
    if v ~= '' then
        splitted2 = v:split('[{/}]')
        if not ChatFrame:FindFirstChild(tostring(splitted2[1])) then
            create_chat(splitted2[1],splitted2[2],splitted2[3],splitted2[4])
        end
    end
end
-- _G.a = false
-- _G.a = true
-- spawn(function()
--     repeat wait() 
        
--     wait(10)
--     until _G.a == false    
-- end)
